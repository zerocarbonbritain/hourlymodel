<style>
h3 { 
    color:#0699fa;
    margin:0px;
}

hr {
    background: #0699fa;
    border: 0; height: 1px; 
    margin-top:8px;
    margin-bottom:8px;
}

table {
    width:auto
}

table th {
    text-align:left;
    border: 0px solid #ddd;
    padding:6px 13px;
}

table td {
    text-align:left;
    border: 0px solid #ddd;
    padding:6px 13px;
}

.box {
    width:100%;
    background-color:rgba(68,179,226,0.1);
    margin-right:20px;
    margin-bottom:20px;
}

.inner {
    padding:20px;
    color:#333;
    display:none;
}

.box-title {
    background-color:rgba(68,179,226,1.0);
    padding:10px;
    color:#fff;
    cursor:pointer;
}

.icon-expand {
    width:12px; 
    margin-right:10px;
    margin-top:2px;
}
 
input[type='text'] {
    width:70px;
}    

[v-cloak] {
  display: none;
}
</style>

<div id="app" v-cloak>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>ZERO CARBON BRITAIN HOURLY MODEL v3</b><div class="loading_prc" style="float:right">Loading...</div></div>
    <div class="inner" style="display:block" name="overview">
<div style="font-size:14px"><b>Note:</b> This hourly energy model is designed to be used in conjunction with the ZeroCarbonBritain matrix spreadsheet, which both provides background calculation for many of the inputs and makes use of the model outputs.</div><br>
    
        View:
        
        <button @click="pan_left"><</button>
        <button @click="pan_right">></button>
        <button @click="zoom_out">-</button>
        <button @click="zoom_in">+</button>
        <button @click="reset">reset</button>
        <button @click="view_mode('electricity')">Electricity Balance</button>
        <button @click="view_mode('stores')">Stores</button>
        <button @click="view_mode('backup')">Backup</button>
        <button @click="view_mode('heat')">Heat</button>    
          
        <div id="placeholder_bound" style="width:100%">
            <div id="placeholder"></div>
        </div>
        <br>
        
        Select scenario: 
        <select id="select_scenario" @change="change_scenario" v-model="selected_scenario">
            <option value='default'>ZeroCarbonBritain (Default)</option>
            <option v-for="(name,index) in scenario_list">{{ name }}</option>
        </select>
        
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>SUPPLY</b></div>
    <div class="inner" name="supply">
        <div style="font-size:14px">The following renewable supply mix is detailed in full on page 57-61 of the ZCB report. Capacities reflect proportions of available resource e.g: the Offshore Valuation Group report (2010) estimates that we could produce more than 1,500 TWh/year from floating offshore wind turbines, 400 TWh/year from fixed offshore wind turbines, 40 TWh/year from wave power and 116 TWh/year from tidal stream. The ZCB scenario suggests that only a proportion of this potential would need to be developed. 
        
        </div><br>

        <table class="table" style="width:100%">
        <tr>
          <th></th>
          <th>GW cap.</th>
          <th>TWh/yr</th>
          <th>CF</th>
          <th>availability</th>
        </tr>
        <tr>
          <td>Offshore wind</td>
          <td><input v-model.number="i.supply.offshore_wind_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_offshore_wind | format_energy }} <span class="unit">TWh/yr</span></td>
          <td>{{ o.supply.offshore_wind_capacity_factor | format_prc }} <span class="unit">%</span></td>
          <td><input v-model.number="i.supply.offshore_wind_availability" type="text" @change="update" /></td>
        </tr>
        <tr>
          <td>Onshore wind</td>
          <td><input v-model.number="i.supply.onshore_wind_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_onshore_wind | format_energy }} <span class="unit">TWh/yr</span></td>
          <td>{{ o.supply.onshore_wind_capacity_factor | format_prc }} <span class="unit">%</span></td>
          <td><input v-model.number="i.supply.onshore_wind_availability" type="text" @change="update" /></td>
        </tr>
        <tr>
          <td>Wave</td>
          <td><input v-model.number="i.supply.wave_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_wave | format_energy }} <span class="unit">TWh/yr</span></td>
          <td>{{ o.supply.wave_capacity_factor | format_prc }} <span class="unit">%</span></td>
          <td></td>
        </tr>
        <tr>
          <td>Tidal (range + stream)</td>
          <td><input v-model.number="i.supply.tidal_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_tidal | format_energy }} <span class="unit">TWh/yr</span></td>
          <td>{{ o.supply.tidal_capacity_factor | format_prc }} <span class="unit">%</span></td>
          <td></td>
        </tr>
        <tr>
          <td>Hydro</td>
          <td><input v-model.number="i.supply.hydro_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_hydro | format_energy }} <span class="unit">TWh/yr</span></td>
          <td><input v-model.number="i.supply.hydro_capacity_factor" type="text" @change="update" /></td>
          <td></td>
        </tr>
        <tr>
          <td>Solar PV</td>
          <td><input v-model.number="i.supply.solarpv_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_solarpv | format_energy }} <span class="unit">TWh/yr</span></td>
          <td>{{ o.supply.solarpv_capacity_factor | format_prc }} <span class="unit">%</span></td>
          <td></td>
        </tr>
        <tr>
          <td>Solar Thermal (heat)</td>
          <td><input v-model.number="i.supply.solarthermal_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_solarthermal | format_energy }} <span class="unit">TWh/yr</span></td>
          <td>{{ o.supply.solarthermal_capacity_factor | format_prc }} <span class="unit">%</span></td>
          <td></td>
        </tr>
        <tr>
          <td>Geo Thermal Electricity</td>
          <td><input v-model.number="i.supply.geothermal_elec_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_geothermal_elec | format_energy }} <span class="unit">TWh/yr</span></td>
          <td><input v-model.number="i.supply.geothermal_elec_capacity_factor" type="text" @change="update" /></td>
          <td></td>
        </tr>
        <tr>
          <td>Geo Thermal Heat</td>
          <td><input v-model.number="i.supply.geothermal_heat_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_geothermal_heat | format_energy }} <span class="unit">TWh/yr</span></td>
          <td><input v-model.number="i.supply.geothermal_heat_capacity_factor" type="text" @change="update" /></td>
          <td></td>
        </tr>   
        <tr>
          <td>Nuclear</td>
          <td><input v-model.number="i.supply.nuclear_capacity" type="text" @change="update" /></td>
          <td>{{ o.supply.total_nuclear | format_energy }} <span class="unit">TWh/yr</span></td>
          <td><input v-model.number="i.supply.nuclear_capacity_factor" type="text" @change="update" /></td>
          <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Grid loss</td>
            <td><input v-model.number="i.supply.grid_loss_prc" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Biomass for biogas</td>
            <td><input v-model.number="i.biogas.biomass_for_biogas" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Anaerobic digestion efficiency</td>
            <td><input v-model.number="i.biogas.anaerobic_digestion_efficiency" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        </table>
        
        <div style="font-size:14px"><i>* Solar thermal is given in GW solar PV equivalent, actual capacity is much smaller and capacity factor higher.</i></div>       
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>LIGHTING, APPLIANCES & COOKING</b></div>
    <div class="inner" name="lac">
        <div style="font-size:14px">
        The ZCB scenario targets energy demand reductions in line with DECC 2050 level 2-4 for domestic cooking, level 3 for domestic lighting & appliances and level 4 for services catering, lighting & appliances. Cooling demand is reduced in line with DECC 2050 level 3/4 & improved cooling efficiency. Energy demands include adjustment for larger 2030 population. See methodology document for full detail. Reductions here are shown relative to 2018 rather than 2007 baseline used in report.
        </div><br>
        
        <table class="table" style="width:100%">
        <tr>
            <th width="40%"></th>
            <th width="20%">Annual demand</th>
            <th width="20%">% Reduction vs 2018</th>
            <th width="20%"></th>
        </tr>
        <tr>
            <td>Domestic Lighting & Appliances</td>
            <td><input v-model.number="i.LAC.domestic.lighting_and_appliances_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh/yr</td>   
            <td>{{ (1-i.LAC.domestic.lighting_and_appliances_TWhy/76.6)*100 | toFixed(0) }}%</td>
            <td>{{ o.LAC.domestic_appliances_kwh | toFixed(0) }} kWh/household</td>
        </tr>
        <tr>
            <td>Domestic Cooking</td>
            <td><input v-model.number="i.LAC.domestic.cooking_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh/yr</td>
            <td>{{ (1-i.LAC.domestic.cooking_TWhy/13.2)*100 | toFixed(0) }}%</td>
            <td>{{ o.LAC.domestic_cooking_kwh | toFixed(0) }} kWh/household</td>
        </tr>
        <tr>
            <td>Services Lighting & Appliances</td>
            <td><input v-model.number="i.LAC.services.lighting_and_appliances_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh/yr</td>
            <td>{{ (1-i.LAC.services.lighting_and_appliances_TWhy/43.6)*100 | toFixed(0) }}%</td>
            <td></td> 
        </tr>
        <tr>
            <td>Services Catering</td>
            <td><input v-model.number="i.LAC.services.catering_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh/yr</td>
            <td>{{ (1-i.LAC.services.catering_TWhy/25.3)*100 | toFixed(0) }}%</td>
            <td></td>
        </tr>
        <tr>
            <td>Services Cooling</td>
            <td><input v-model.number="i.LAC.services.cooling_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh/yr</td>
            <td>{{ (1-i.LAC.services.cooling_TWhy/9)*100 | toFixed(0) }}%</td>
            <td></td>
        </tr>
        </table>
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>SPACE / WATER HEAT DEMAND</b></div>
    <div class="inner" name="spacewaterheat">
        <div style="font-size:14px">
        The ZCB scenario targets the same space heating building heat loss factors as given in the DECC 2050 level 4 scenario. Water heating demand is in line with DECC 2050 level 3 revised upwards to account for the larger 2030 population. See methodology document for full detail. Reductions here are shown relative to 2018 rather than 2007 baseline used in report.
        </div>
        
        <p><b>1. Space Heating</b></p>
                
        <p>Space heating base temperature: <input v-model.number="i.space_heating.base_temperature" type="text" @change="update" style="width:70px"  autocomplete="off" /> K<br><span style="font-size:14px">Uses 16.7°C as average internal temp. and gains& losses from DECC 2050</span></p>

        <table class="table" style="width:100%">
        <tr>
            <th width="20%"></th>
            <th width="20%"></th>
            <th width="20%">Annual demand</th>
            <th width="20%">% Reduction vs 2018</th>
            <th width="20%"></th>
        </tr>
        <tr>
            <td>Domestic</td>
            <td><input v-model.number="i.space_heating.domestic_demand_GWK" type="text" @change="update" style="width:70px"  autocomplete="off" /> GW/K</td>
            <td>{{ o.space_heating.total_domestic_demand*0.0001 | toFixed(2) }} TWh/yr</td>
            <td>{{ (1.0-((o.space_heating.total_domestic_demand*0.0001) / 312.2))*100 | toFixed(0) }}%</td>
            <td>{{ o.space_heating.domestic_kwh | toFixed(0) }} kWh/household</td>
        </tr>
        <tr>
            <td>Services</td>
            <td><input v-model.number="i.space_heating.services_demand_GWK" type="text" @change="update" style="width:70px"  autocomplete="off" /> GW/K</td>
            <td>{{ o.space_heating.total_services_demand*0.0001 | toFixed(2) }} TWh/yr</td>
            <td>{{ (1.0-((o.space_heating.total_services_demand*0.0001) / 112.5))*100 | toFixed(0) }}%</td>
            <td></td>
        </tr>
        <tr>
            <td>Industry</td>
            <td><input v-model.number="i.space_heating.industry_demand_GWK" type="text" @change="update" style="width:70px"  autocomplete="off" /> GW/K</td>
            <td>{{ o.space_heating.total_industry_demand*0.0001 | toFixed(2) }} TWh/yr</td>
            <td>{{ (1.0-((o.space_heating.total_industry_demand*0.0001) / 22.5))*100 | toFixed(0) }}%</td>
            <td></td>
        </tr>
        <tr>
            <td>Combined</td>
            <td>{{ o.space_heating.demand_GWK | toFixed(3) }} GW/K</td>
            <td>{{ o.space_heating.total_demand*0.0001 | toFixed(1) }} TWh/yr</td>     
            <td>{{ (1.0-((o.space_heating.total_demand*0.0001)/(312.2+112.5+22.5)))*100 | toFixed(0) }}%</td>
            <td></td>
        </tr>
        </table>
         
        <p><b>2. Water Heating</b></p>
        
        <table class="table" style="width:100%">
        <tr>
            <td width="20%">Domestic</td>
            <td width="20%"></td>
            <td width="20%"><input v-model.number="i.water_heating.domestic_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td width="20%">{{ (1-i.water_heating.domestic_TWhy/82.2)*100 | toFixed(0) }}%</td>
            <td width="20%">{{ o.water_heating.domestic_kwh | toFixed(0) }} kWh/household</td>
        </tr>
        <tr>
            <td>Services</td>
            <td></td>
            <td><input v-model.number="i.water_heating.services_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td>{{ (1-i.water_heating.services_TWhy/15.9)*100 | toFixed(0) }}%</td>
            <td></td>
        </tr>
        <tr>
            <td>Combined</td>
            <td></td>
            <td>{{ o.water_heating.demand_TWhy | toFixed(1) }} TWh</td>
            <td></td>
            <td></td>
        </tr>
        </table>
    </div>
</div>
<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>HEATING SYSTEMS</b></div>
    <div class="inner" name="heatingsystems">
        <table class="table" style="width:100%">  
            <tr>
                <th></th>
                <th>Share</th>
                <th>Heat demand</th>         
                <th>Efficiency</th>
                <th>Fuel demand</th>
            </tr>
            <tr v-for="(system,index) in i.heating_systems">
                <td>{{ system.name }}</td>
                <td><input v-model.number="system.share" type="text" @change="update" style="width:70px"  autocomplete="off" itype="%" /></td>
                <td>{{ o.heating_systems[index].heat_demand | format_energy }} <span class="unit">TWh/yr</span></td>
                <td><input v-model.number="system.efficiency" type="text" @change="update" style="width:70px"  autocomplete="off" itype="%" /></td>
                <td>{{ o.heating_systems[index].fuel_demand | format_energy }} <span class="unit">TWh/yr</span></td>
            </tr>
        </table>
    
        <!--
        <table class="table" style="width:100%">
        <tr>
            <td>Heat storage enabled?</td>
            <td><input v-model="i.heatstore.enabled" type="checkbox" @change="update" style="width:70px"  autocomplete="off" /></td>
        </tr>      
        <tr v-if="i.heatstore.enabled">
            <td>Heat store storage capacity</td>
            <td><input v-model.number="i.heatstore.storage_capacity" type="text" @change="update" style="width:70px"  autocomplete="off" /> GWh therm</td>
        </tr>
        <tr v-if="i.heatstore.enabled">
            <td>Heat store charging capacity</td>
            <td><input v-model.number="i.heatstore.charge_capacity" type="text" @change="update" style="width:70px"  autocomplete="off" /> GW therm</td>
        </tr>
        </table>
        -->
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>TRANSPORT</b></div>
    <div class="inner" name="transport">
        
        <div style="font-size:14px">                
        Miles travelled per transport mode include a reduction in total miles travelled per person and modal shifts towards more public transport, cycling and less aviation. For comparison you might like to try entering the miles per person in 2016 to see the result without these changes: Walking:198, Cycling:48, Rail:754, Bus:325, Motorbike:46, Cars&Vans:6299, Aviation:3438<br><br>
        
        Load factors for each transport mode are also increased. The 2016 load factors for comparison are:<br>Rail:0.324, Bus:0.1432, Motorbike:1.071, Cars&Vans:0.3288, Aviation:0.85
        <br><br>
        
        See methodology document for detailed discussion of the modal shifts in the ZCB scenario.<br><br>
        
        The mechanical kWh per person km at full occupancy is based on a calculated fleet average, given real world data on a range of available vehicles today. Electric vehicles include battery charging, motor inverter and motor losses. Hydrogen include: fuel cell, transportation, compression, motor & inverter losses. Internal combustion engines include engine losses. See more detailed notes on this <a href="https://trystanlea.org.uk/transport_notes">here</a>.
 
        </div><br>
        
        Miles travelled per transport mode:<br><br>
        
        <table class="table" style="width:100%">
        <tr><th v-for="(mode,key) in i.transport.modes">{{ key }}</th></tr>
        <tr><td v-for="(mode,key) in i.transport.modes"><input v-model.number="mode.miles_pp" type="text" @change="update" /></td></tr>                
        <tr><td v-for="(mode,key) in i.transport.modes">{{ mode.km_pp | toFixed(0) }} <span class="unit">km</span></td></tr>                
        <tr>
          <td>Mechanical</td>
          <td><span class="unit">kWh/p.km full</span></td>
          <td v-for="(mode,key) in i.transport.modes" v-if="mode.mechanical_kwhppkm_full!=undefined">{{ mode.mechanical_kwhppkm_full | toFixed(3) }}</td>
        </tr>
        <tr>
          <td>Electric</td>
          <td><span class="unit">kWh/p.km full</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.EV!=undefined">{{ mode.EV.kwhppkm_full | toFixed(3) }}</td>
          <td v-else></td>
        </tr>
        <tr>
          <td>Hydrogen</td>
          <td><span class="unit">kWh/p.km full</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.H2!=undefined" >{{ mode.H2.kwhppkm_full | toFixed(3) }}</td>
          <td v-else></td>
        </tr>    
        <tr>
          <td>ICE</td>
          <td><span class="unit">kWh/p.km full</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.IC!=undefined">{{ mode.IC.kwhppkm_full | toFixed(3) }}</td>
          <td v-else></td>
        </tr>
        <tr>
          <td>Load factor</td>
          <td></td>
          <td v-for="(mode,key) in i.transport.modes" v-if="mode.load_factor!=undefined"><input v-model.number="mode.load_factor" type="text" @change="update" /></td>
        </tr>            
        <tr>
          <td>Electric</td>
          <td><span class="unit">kWh/p.km</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.EV!=undefined">{{ mode.EV.kwhppkm | toFixed(3) }}</td>
          <td v-else></td>
        </tr>
        <tr>
          <td>Hydrogen</td>
          <td><span class="unit">kWh/p.km</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.H2!=undefined" >{{ mode.H2.kwhppkm | toFixed(3) }}</td>
          <td v-else></td>
        </tr>    
        <tr>
          <td>ICE</td>
          <td><span class="unit">kWh/p.km</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.IC!=undefined">{{ mode.IC.kwhppkm | toFixed(3) }}</td>
          <td v-else></td>
        </tr>
        <tr>
          <td>Prc electric</td>
          <td></td>
          <td v-for="(mode,key) in i.transport.modes" v-if="mode.prc!=undefined"><input v-model.number="mode.prc.EV" type="text" @change="update" /></td>
        </tr>                
        <tr>
          <td>Prc hydrogen</td>
          <td></td>
          <td v-for="(mode,key) in i.transport.modes" v-if="mode.prc!=undefined"><input v-model.number="mode.prc.H2" type="text" @change="update" /></td>
        </tr>                
        <tr>
          <td>Prc synth fuel</td>
          <td></td>
          <td v-for="(mode,key) in i.transport.modes" v-if="mode.prc!=undefined"><input v-model.number="mode.prc.IC" type="text" @change="update" /></td>
        </tr>                
        <tr>
          <td>Electric</td>
          <td><span class="unit">TWh national</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.EV!=undefined">{{ mode.EV.TWh | toFixed(1) }}</td>
          <td v-else></td>
        </tr>
        <tr>
          <td>Hydrogen</td>
          <td><span class="unit">TWh national</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.H2!=undefined" >{{ mode.H2.TWh | toFixed(1) }}</td>
          <td v-else></td>
        </tr>    
        <tr>
          <td>ICE</td>
          <td><span class="unit">TWh national</span></td>
          <td v-for="(mode,key) in o.transport.modes" v-if="mode.IC!=undefined">{{ mode.IC.TWh | toFixed(1) }}</td>
          <td v-else></td>
        </tr>
        </table>
        
        <table class="table" style="width:100%">
          <tr>
            <td>Rail freight electricity demand</td>
            <td><input v-model.number="i.transport.rail_freight_elec_demand" type="text" @change="update" /> <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Freight battery EV electricity demand</td>
            <td><input v-model.number="i.transport.freight_BEV_demand" type="text" @change="update" /> <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Freight hydrogen demand</td>
            <td><input v-model.number="i.transport.freight_H2_demand" type="text" @change="update" /> <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Freight synth fuel demand</td>
            <td><input v-model.number="i.transport.freight_IC_demand" type="text" @change="update" /> <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Total transport BEV electricity demand</td>
            <td>{{ o.transport.fuel_totals.BEV | toFixed(1) }} <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Total transport direct electricity demand (trains)</td>
            <td>{{ o.transport.fuel_totals.DEV | toFixed(1) }} <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Total transport hydrogen demand</td>
            <td>{{ o.transport.fuel_totals.H2 | toFixed(1) }} <span class="unit">TWh/yr</span></td>
          </tr>
          <tr>
            <td>Total transport synth fuel demand</td>
            <td>{{ o.transport.fuel_totals.IC | toFixed(1) }} <span class="unit">TWh/yr</span></td>
          </tr>
        </table>
    
        <table class="table" style="width:100%">
        <tr>
            <td>Total useable EV battery capacity<br><div style="font-size:14px"><i>(15 million EV's with ~30 kWh batteries + 70k 900 kWh HGV's)</i></div></td>
            <td><input v-model.number="i.transport.electric_car_battery_capacity" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh</td>
        </tr>
        <tr>
            <td>Maximum rate of charge<div style="font-size:14px"><i>1/7th of total stored capacity</i></div></td>
            <td><input v-model.number="i.transport.electric_car_max_charge_rate" type="text" @change="update" style="width:70px"  autocomplete="off"/> GW</td>
        </tr>
        <tr>
            <td>Enable smart charging?</td>
            <td><select v-model.number="i.transport.smart_charging_enabled" autocomplete="off" @change="update">
                    <option value=1>Enabled (charges more when excess supply available)</option>
                    <option value=0>Disabled (simple charging profile ~2-3x more charging at night than day)</option>
            </select></td> 
        </tr>
        <tr>
            <td>Smart charging algorithm</td>
            <td><select v-model.value="i.transport.smart_charge_type" autocomplete="off" @change="update">
                    <option value=average>Deviation from mean (peaker)</option>
                    <option value=flatout>Flat out (basic)</option>
            </select></td>
        </tr> 
        <tr>
            <td>Enable vehicle to grid?</td>
            <td><select v-model.number="i.transport.V2G_enabled" autocomplete="off" @change="update">
                    <option value=1>Enabled (Note: implementation is basic and assumes very high uptake and vehicle availability)</option>
                    <option value=0>Disabled</option>
            </select></td> 
        </tr> 
        <tr>
            <td>Vehicle to grid discharge algorithm</td>
            <td><select v-model.value="i.transport.V2G_discharge_type" autocomplete="off" @change="update">
                    <option value=average>Deviation from mean (peaker)</option>
                    <option value=flatout>Flat out (basic)</option>
            </select></td>
        </tr>
        </table>
        
         <div style="font-size:14px"><i>See notes on sythetic fuel production using fischer-tropsch process here <a href="https://trystanlea.org.uk/zcb_fischer_tropsch">https://trystanlea.org.uk/zcb_fischer_tropsch</a></i></div>
        
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>INDUSTRY</b></div>
    <div class="inner" name="industry">
        <div style="font-size:14px">
        The ZCB scenario bases industrial energy demand on 2007 levels adjusted for 2030 population and a 25% reduction in energy intensity, this gives a total industrial energy demand of 331 TWh × 1.16 × 0.75 = 288 TWh. Industrial energy demand in 2018 was actually 25% below this at 216 TWh, one way of looking at this is that the ZCB scenario includes some onshoring of industry and energy associated with goods that are currently imported.
        <br><br>
        Industrial energy use is dealt with in the scenario at a high level and a cautious approach is taken. Industry energy demand is an area highlighted for further research within the ZeroCarbonBritain scenario.
        
        </div><br>
        
        <table class="table" style="width:100%">
        <tr>
          <th></th>
          <th>Energy Demand</th>
          <th>Elec</th>
          <th>CH4</th>
          <th>H2</th>
          <th>Synth<br>Fuel</th>
          <th>Biomass</th>
          <th>DSR<br>EL>CH4</th>
          <th>DSR<br>EL>H2</th> 
        </tr>
        <tr>
            <td>High temp process</td>
            <td><input v-model.number="i.industry.high_temp_process_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td><input v-model.number="i.industry.high_temp_process_fixed_elec_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.high_temp_process_fixed_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.high_temp_process_fixed_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.high_temp_process_fixed_liquid_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.high_temp_process_fixed_biomass_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.high_temp_process_DSR_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>          
            <td><input v-model.number="i.industry.high_temp_process_DSR_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>          
        </tr>
        <tr>
            <td>Low temp process</td>
            <td><input v-model.number="i.industry.low_temp_process_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td><input v-model.number="i.industry.low_temp_process_fixed_elec_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.low_temp_process_fixed_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.low_temp_process_fixed_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.low_temp_process_fixed_liquid_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.low_temp_process_fixed_biomass_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.low_temp_process_DSR_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>          
            <td><input v-model.number="i.industry.low_temp_process_DSR_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>  
        </tr>
        <tr>
            <td>Drying and seperation</td>
            <td><input v-model.number="i.industry.dry_sep_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td><input v-model.number="i.industry.dry_sep_fixed_elec_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.dry_sep_fixed_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.dry_sep_fixed_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.dry_sep_fixed_liquid_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.dry_sep_fixed_biomass_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.dry_sep_DSR_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>          
            <td><input v-model.number="i.industry.dry_sep_DSR_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>  
        </tr>
        <tr>
            <td>Other heat</td>
            <td><input v-model.number="i.industry.other_heat_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td><input v-model.number="i.industry.other_heat_fixed_elec_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_heat_fixed_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_heat_fixed_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_heat_fixed_liquid_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_heat_fixed_biomass_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_heat_DSR_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>          
            <td><input v-model.number="i.industry.other_heat_DSR_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>  
        </tr>
        <tr>
            <td>Motors</td>
            <td><input v-model.number="i.industry.motors_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td>100%</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Compressed air</td>
            <td><input v-model.number="i.industry.compressed_air_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td>100%</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>          
        </tr>
        <tr>
            <td>Lighting</td>
            <td><input v-model.number="i.industry.lighting_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td>100%</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Refrigeration</td>
            <td><input v-model.number="i.industry.refrigeration_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td>100%</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Other non heat</td>
            <td><input v-model.number="i.industry.other_non_heat_TWhy" type="text" @change="update" style="width:70px"  autocomplete="off" /> TWh</td>
            <td><input v-model.number="i.industry.other_non_heat_fixed_elec_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_non_heat_fixed_CH4_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_non_heat_fixed_H2_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_non_heat_fixed_liquid_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td><input v-model.number="i.industry.other_non_heat_fixed_biomass_prc" type="text" @change="update" style="width:30px"  autocomplete="off" /> %</td>
            <td></td>
            <td></td>
        </tr>
        </table>

        <div style="font-size:14px"><i>DSR options implement a substitutable heat source, direct electricity is used when excess renewable energy is available, methane or hydrogen is used when direct electricity supply is not sufficient.</i></div>
        
        <p><b>Total demand by fuel:</b></p>
        
        <table class="table" style="width:100%">
            <tr><td>Electricity</td><td>{{ o.industry.total_elec_demand*0.0001 | toFixed(1) }} TWh</td></tr>
            <tr><td>Methane</td><td>{{ o.industry.total_methane_demand*0.0001 | toFixed(1) }} TWh</td></tr>
            <tr><td>Hydrogen</td><td>{{ o.industry.total_hydrogen_demand*0.0001 | toFixed(1) }} TWh</td></tr>
            <tr><td>Liquid synth fuel</td><td>{{ o.industry.total_synth_fuel_demand*0.0001 | toFixed(1) }} TWh</td></tr>       
            <tr><td>Solid biomass</td><td>{{ o.industry.total_biomass_demand*0.0001 | toFixed(1) }} TWh</td></tr>
            <tr><th>Total demand (in)</th><th>{{ o.industry.total_demand | toFixed(1) }} TWh</th></tr>
            <tr><th>Total demand (out)</th><th>{{ o.industry.total_demand_check*0.0001 | toFixed(1) }} TWh</th></tr>
        </table>
    </div>
</div>

<!------------------------------------------------------------------------------------------------------->
<!-- Electric storage -->
<!------------------------------------------------------------------------------------------------------->
<div class="box" name="elec_storage">
  <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>ELECTRIC STORAGE</b></div>
  <div class="inner" name="elec_storage">
    <table class="table" style="width:100%">
      <tr>
          <td>Enable electricity storage?</td>
          <td><select v-model.value="i.electric_storage.type" autocomplete="off" @change="update">
                  <option value="nostore">No storage</option>
                  <option value="basic">Basic, flat out</option>
                  <option value="average">Proportional: average</option>
              </select></td>
          <td></td>
          <td></td>
      </tr>    
      <tr>
        <td>Electricity storage capacity</td>
        <td><input v-model.number="i.electric_storage.capacity_GWh" type="text" @change="update" /> <span class="unit">GWh</span></td>
        <td>({{ o.electric_storage.kwh_per_household | toFixed(1) }} kWh/household)</td>
      </tr>
      <tr>
        <td>Electricity charge capacity</td>
        <td><input v-model.number="i.electric_storage.charge_capacity_GW" type="text" @change="update" /> <span class="unit">GW</span></td>
        <td>(Used: {{ o.electric_storage.max_charge | toFixed(0) }} <span class="unit">GW</span>)</td>
      </tr>
      <tr>
        <td>Electricity discharge capacity</td>
        <td><input v-model.number="i.electric_storage.discharge_capacity_GW" type="text" @change="update" /> <span class="unit">GW</span></td>
        <td>(Used: {{ o.electric_storage.max_discharge | toFixed(0) }} <span class="unit">GW</span>)</td>                  
      </tr>
      <tr>
        <td>Charge efficiency</td>
        <td><input v-model.number="i.electric_storage.charge_efficiency" type="text" @change="update" /> <span class="unit">%</span></td>
        <td></td>
      </tr>
      <tr>
        <td>Discharge efficiency</td>
        <td><input v-model.number="i.electric_storage.discharge_efficiency" type="text" @change="update" /> <span class="unit">%</span></td>
        <td></td>
      </tr>
      <tr>
        <td>Total charge</td>
        <td>{{ o.electric_storage.total_charge*0.0001 | toFixed(3) }} <span class="unit">TWh/yr</span></td>
        <td></td>
      </tr>
      <tr>
        <td>Total discharge</td>
        <td>{{ o.electric_storage.total_discharge*0.0001 | toFixed(3) }} <span class="unit">TWh/yr</span></td>
        <td></td>
      </tr>
      <tr>
        <td>Storage losses</td>
        <td>{{ o.total_losses.electric_storage*0.0001 | toFixed(3) }} <span class="unit">TWh/yr</span></td>
        <td></td>
      </tr>
      <tr>
        <td>Number of cycles (total discharge / storage capacity)</td>
        <td>{{ o.electric_storage.cycles_per_year | toFixed(1) }} <span class="unit">cycles/yr</span></td>
        <td></td>
      </tr>
    </table>
  </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>STORAGE & BACKUP</b></div>
    <div class="inner" name="backup">
        <div style="font-size:14px">
        Select dispatchable generation capacity to meet bulk of backup requirement. Tune electrolysis & methanation capacity and respective storage capacities to meet given hydrogen, synth fuel and synthetic methane demand. Select 'Stores' tab above to see store levels, ensure that the stores dont get depleted or over-fill. 50 GWh of generic storage is equivalent to a ~1.7 kWh battery store per household.<br><br>
        For background notes on the sabatier process see:<br> <a href="https://trystanlea.org.uk/zcb_sabatier_process">https://trystanlea.org.uk/zcb_sabatier_process</a>
        </div><br>
        <table class="table" style="width:100%">
        <tr>
            <th></th>
            <th>Capacity</th>
            <th></th>
            <th></th>
        </tr>
        <tr>
            <td style="width:55%">Dispatchable generation<br><span style="font-size:12px"><i>E.g High efficiency and high flexibility CCGT gas turbines</i></span></td>
            <td><input v-model.number="i.electric_backup.methane_turbine_capacity" type="text" @change="update" style="width:70px"  autocomplete="off"/> GW</td>
            <td style="text-align:right">Efficiency</td>
            <td><input v-model.number="i.electric_backup.methane_turbine_efficiency" type="text" @change="update" style="width:70px"  autocomplete="off"/> (HHV)</td>              
        </tr>
        <tr>
            <td>Electrolysis</td>
            <td><input v-model.number="i.hydrogen.electrolysis_capacity_GW" type="text" @change="update" style="width:70px"  autocomplete="off"/> GW</td>
            <td style="text-align:right">Efficiency</td>
            <td><input v-model.number="i.hydrogen.electrolysis_efficiency" type="text" @change="update" style="width:70px"  autocomplete="off"/> (HHV)</td>
        </tr>
        <tr>
            <td>Hydrogen storage<br><span style="font-size:12px"><i>GWh chemical energy HHV</i></span></td>
            <td><input v-model.number="i.hydrogen.storage_capacity_GWh" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh</td>
            <td style="text-align:right">Lower limit</td>
            <td><input v-model.number="i.hydrogen.minimum_store_level" type="text" @change="update" style="width:70px"  autocomplete="off"/> (Fraction)</td>            
        </tr>
        <tr>
            <td>Methanation (without heat integration)<br><span style="font-size:12px"><i>Capacity given is for H2 feed to process</i></span></td>
            <td><input v-model.number="i.methane.methanation_capacity" type="text" @change="update" style="width:70px"  autocomplete="off"/> GW</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Power to X: Methane and Liquids overall capacity</td>
            <td><input v-model.number="i.power_to_X.capacity" type="text" @change="update" style="width:70px"  autocomplete="off"/> GW (elec)</td>
            <td></td>
            <td></td>            
        </tr>
        <tr>
            <td>Power to X: Methane<br>
            <span style="font-size:12px"><i>E.g Helmeth SOEC technology. Includes DAC of CO2 using waste heat.</i></span>
            </td>
            <td><input v-model.number="i.power_to_X.prc_gas" type="text" @change="update" style="width:70px"  autocomplete="off"/> %</td>
            <td style="text-align:right">Efficiency</td>
            <td><input v-model.number="i.power_to_X.gas_efficiency" type="text" @change="update" style="width:70px"  autocomplete="off"/> (HHV)</td>            
        </tr>
        <tr>
            <td>Power to X: Liquids<br>
            <span style="font-size:12px"><i>'E.g Power-to-Liquids Potentials and Perspectives for the Future Supply of Renewable Aviation Fuel'</i></span>
            </td>
            <td><input v-model.number="i.power_to_X.prc_liquid" type="text" @change="update" style="width:70px"  autocomplete="off"/> %</td>
            <td style="text-align:right">Efficiency</td>
            <td><input v-model.number="i.power_to_X.liquid_efficiency" type="text" @change="update" style="width:70px"  autocomplete="off"/> (HHV)</td>            
        </tr>
        <tr>
            <td>Methane storage<br><span style="font-size:12px"><i>GWh chemical energy HHV</i></span></td>
            <td><input v-model.number="i.methane.storage_capacity_GWh" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh</td>
            <td style="text-align:right">Store start</td>
            <td><input v-model.number="i.methane.SOC_start" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh</td>
        </tr>
        <tr>
            <td>Synth Fuel<br><span style="font-size:12px"><i>Capacity given is for H2 feed to process</i></span></td>
            <td><input v-model.number="i.synth_fuel.capacity_GW" type="text" @change="update" style="width:70px"  autocomplete="off"/> GW</td>
            <td style="text-align:right">Store start</td>
            <td><input v-model.number="i.synth_fuel.store_start_GWh" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh</td>
        </tr>
        <tr>
            <td>FT process: biomass required</td>
            <td><input v-model.number="i.synth_fuel.FT_process_biomass_req" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh/GWh fuel</td>
            <td>FT process: hydrogen required</td>
            <td><input v-model.number="i.synth_fuel.FT_process_hydrogen_req" type="text" @change="update" style="width:70px"  autocomplete="off"/> GWh/GWh fuel</td>
        </tr>
        <tr>
            <td>Use flat demand profiles</td>
            <td><select v-model.number="i.use_flat_profiles" autocomplete="off" @change="update">
                    <option value=0>Default (variable profiles)</option>
                    <option value=1>Flat demand profile</option>
                </select></td>
            <td></td>
            <td></td>
        </tr>
        </table>
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>LAND USE<span style="float:right">{{ o.land_use.total_prc*100 | toFixed(1) }} %</span></b></div>
    <div class="inner" name="land_use">
        <table class="table" style="width:100%">
            <tr>
                <th></th>
                <th>Land area</th>
                <th>Carbon<br>sequestration</th>
            </tr>
            <tr>
                <td>Existing natural broadleaf woodland</td>
                <td>{{ i.land_use.existing_natural_broadleaf_woodland }} kha</td>
                <td></td>
            </tr>
            <tr>
                <td>Existing natural coniferous woodland</td>
                <td>{{ i.land_use.existing_natural_coniferous_woodland }} kha</td>
                <td></td>
            </tr>
            <tr>
                <td>Existing productive broadleaf woodland</td>
                <td>{{ i.land_use.existing_productive_broadleaf_woodland }} kha</td>
                <td>{{ o.carbon_sequestration.timber_products.existing_productive_broadleaf_woodland+o.carbon_sequestration.biochar.existing_productive_broadleaf_woodland | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td>Existing productive coniferous woodland</td>
                <td>{{ i.land_use.existing_productive_coniferous_woodland }} kha</td>
                <td>{{ o.carbon_sequestration.timber_products.existing_productive_coniferous_woodland+o.carbon_sequestration.biochar.existing_productive_coniferous_woodland | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td>New natural broadleaf woodland</td>
                <td><input v-model.number="i.land_use.new_natural_broadleaf_woodland" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
                <td>{{ o.carbon_sequestration.reforestation.new_natural_broadleaf_woodland | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td>New natural coniferous woodland</td>
                <td><input v-model.number="i.land_use.new_natural_coniferous_woodland" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
                <td>{{ o.carbon_sequestration.reforestation.new_natural_coniferous_woodland | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td>New productive broadleaf woodland</td>
                <td><input v-model.number="i.land_use.new_productive_broadleaf_woodland" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
                <td>{{ (o.carbon_sequestration.reforestation.new_productive_broadleaf_woodland+o.carbon_sequestration.timber_products.new_productive_broadleaf_woodland+o.carbon_sequestration.biochar.new_productive_broadleaf_woodland) | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td>New productive coniferous woodland</td>
                <td><input v-model.number="i.land_use.new_productive_coniferous_woodland" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
                <td>{{ (o.carbon_sequestration.reforestation.new_productive_coniferous_woodland+o.carbon_sequestration.timber_products.new_productive_coniferous_woodland+o.carbon_sequestration.biochar.new_productive_coniferous_woodland) | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>        
            <tr>
                <td>Short rotation forestry <span style="font-size:12px">(30% wood products & 65% biomass heat)</span></span></td>
                <td><input v-model.number="i.land_use.short_rotation_forestry" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
                <td>{{ (o.carbon_sequestration.reforestation.short_rotation_forestry+o.carbon_sequestration.timber_products.short_rotation_forestry+o.carbon_sequestration.biochar.short_rotation_forestry) | toFixed(1) }} MtCO2e/yr</td>
            </tr>
            <tr>
                <td>Short rotation coppice <span style="font-size:12px">(biomass heat)</span></td>
                <td>{{ i.land_use.short_rotation_coppice | toFixed(0) }} kha</td>
            </tr>
            <tr>
                <td>Perrennial grass miscanthus <span style="font-size:12px">(liquid biofuels)</span></td>
                <td>{{ i.land_use.perrennial_grass_miscanthus | toFixed(0) }} kha</td>
            </tr>
            <tr>
                <td>Rotational grass ryegrass <span style="font-size:12px">(biogas)</span></td>
                <td>{{ i.land_use.rotational_grass_ryegrass | toFixed(0) }} kha</td>
            </tr>
            <tr>
                <td>Annual grass hemp <span style="font-size:12px">(insulation & other materials)</span></span></td>
                <td><input v-model.number="i.land_use.annual_grass_hemp" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr>      
            <tr>
                <td></td><td></td>
            </tr>        
            <tr>
                <td>Intensive and rough grazing <span style="font-size:12px">(Currently 11,522 kha)</span></td>
                <td><input v-model.number="i.land_use.intensive_and_rough_grazing" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr>
            <tr>
                <td>Food crops <span style="font-size:12px">(Currently 2,557 kha)</span></td>
                <td><input v-model.number="i.land_use.food_crops" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr> 
            <tr>
                <td>Feed crops for livestock <span style="font-size:12px">(Currently 2,557 kha)</span></td>
                <td><input v-model.number="i.land_use.feed_crops_for_livestock" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr> 
            <tr>
                <td></td><td></td>
            </tr>        
            <tr>
                <td>Mountain heath and bog</span></td>
                <td><input v-model.number="i.land_use.mountain_heath_and_bog" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr>   
            <tr>
                <td>Semi natural grassland</span></td>
                <td><input v-model.number="i.land_use.semi_natural_grassland" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr>  
            <tr>
                <td>Coastal and freshwater</span></td>
                <td><input v-model.number="i.land_use.coastal_and_freshwater" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr>  
            <tr>
                <td>Urban areas</span></td>
                <td><input v-model.number="i.land_use.urban_areas" type="text" @change="update" style="width:70px"  autocomplete="off"/> kha</td>
            </tr>
            <tr>
                <td></td><td></td>
            </tr>        
            <tr>
                <th>Total land used in scenario</span></th>
                <th>{{ o.land_use.total | toFixed(0) }} kha</th>
            </tr>   
            <tr>
                <th>Remaining land available</span></th>
                <th>{{ o.land_use.available | toFixed(0) }} kha</th>
            </tr>  
            <tr>
                <td>Total UK land area</span></td>
                <td>24728 kha</td>
            </tr>
            <tr>
                <td>Percentage of UK land area used</span></td>
                <td>{{ o.land_use.total_prc*100 | toFixed(1) }} %</td>
            </tr>
        </table>
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>EMISSIONS BALANCE<span style="float:right">{{ o.emissions_balance.total | toFixed(2) }} MtCO2e/yr</span></b></div>
    <div class="inner" name="emissions_balance">
        <table class="table" style="width:100%">
            <tr>
                <th></th>
                <th>MtCO2e/yr</th>
            <tr>
                <td>Disused mines</td>
                <td><input v-model.number="i.emissions_balance.disused_mines" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Gas leakage</td>
                <td><input v-model.number="i.emissions_balance.gas_leakage" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Refrigerants</td>
                <td><input v-model.number="i.emissions_balance.refrigerants" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Other foams, solvents & aerosols</td>
                <td><input v-model.number="i.emissions_balance.other_foams_solvents_aerosols" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Iron and steel process emissions</td>
                <td><input v-model.number="i.emissions_balance.iron_and_steel" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Cement process emissions</td>
                <td><input v-model.number="i.emissions_balance.cement" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Lime process emissions</td>
                <td><input v-model.number="i.emissions_balance.lime" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Soda ash process emissions</td>
                <td><input v-model.number="i.emissions_balance.soda_ash" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Glass process emissions</td>
                <td><input v-model.number="i.emissions_balance.glass" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Aluminium process emissions</td>
                <td><input v-model.number="i.emissions_balance.aluminium" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Other process emissions</td>
                <td><input v-model.number="i.emissions_balance.other" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>              
            <tr>
                <td>Agriculture total</td>
                <td><input v-model.number="i.emissions_balance.agriculture_total" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Biomass burning</td>
                <td><input v-model.number="i.emissions_balance.biomass_burning" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Reforestation</td>
                <td>{{ i.emissions_balance.reforestation | toFixed(2) }} </td>
            </tr>
            <tr>
                <td>Harvested wood</td>
                <td>{{ i.emissions_balance.harvested_wood | toFixed(2) }} </td>
            </tr>
            <tr>
                <td>Wetlands</td>
                <td><input v-model.number="i.emissions_balance.wetlands" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Settlements</td>
                <td><input v-model.number="i.emissions_balance.settlements" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Landfill</td>
                <td><input v-model.number="i.emissions_balance.landfill" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Waste water handling</td>
                <td><input v-model.number="i.emissions_balance.waste_water_handling" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>Waste incineration</td>
                <td><input v-model.number="i.emissions_balance.waste_incineration" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <td>International aviation bunkers</td>
                <td>{{ i.emissions_balance.international_aviation_bunkers | toFixed(2) }} </td>
            </tr>
            <tr>
                <td>Biochar carbon capture</td>
                <td>{{ i.emissions_balance.biochar_carbon_capture | toFixed(2) }} </td>             
            </tr>
            <tr>
                <td>Landfill carbon capture</td>
                <td><input v-model.number="i.emissions_balance.landfill_carbon_capture" type="text" @change="update" style="width:70px"  autocomplete="off"/></td>
            </tr>
            <tr>
                <th>Total balance</th>
                <th>{{ o.emissions_balance.total | toFixed(2) }} MtCO2e/yr</th>
            </tr>
        </table>
    </div>
</div>

<div class="box">
    <div class="box-title">
        <img class="icon-expand" src="img/expand.png"><b>FINAL SUPPLY DEMAND MATCHING
        <span style="float:right">{{ (100*o.balance.final_elec_balance_positive/i.hours) | toFixed(3) }}%</span>
        </b>
    </div>
    <div class="inner" style="display:block" name="balance">

        <div id="stacks_bound" style="width:450; height:530; float:left;">
            <canvas id="stacks" width="450" height="530"></canvas>
        </div>
        
        <div style="float:left; width:35%;">
            <p style="font-size:18px">Total supply: {{ o.balance.total_supply*0.0001 | toFixed(0) }} TWh</p>
            <p style="font-size:18px">Total demand: {{ o.balance.total_demand*0.0001 | toFixed(0) }} TWh</p>
            <p style="font-size:18px">Primary energy factor: {{ o.balance.primary_energy_factor | toFixed(2) }}</p>
            <p style="font-size:18px">Exess generation: {{ o.balance.total_exess*0.0001 | toFixed(0) }} TWh</p>
            <p style="font-size:18px">Unmet demand: {{ o.balance.total_unmet_demand*0.0001 | toFixed(3) }} TWh</p>
            <p style="font-size:18px">Land use total: {{ o.land_use.total | toFixed(0) }} kha</p>
            <p style="font-size:18px">Land available: {{ o.land_use.available | toFixed(0) }} kha</p>
            <p style="font-size:18px">Emissions balance {{ o.emissions_balance.total | toFixed(2) }}</p>
            <p style="font-size:18px">Grid CO2 intensity {{ o.emissions_balance.grid_co2_intensity | toFixed(0) }} gCO2/kWh</p>
            
            
        </div>
        
        <div style="clear:both"></div>
        
        Energy stack units: 
        <select v-model="i.units_mode" autocomplete="off" @change="update">
            <option value="TWhyr">National TWh/yr</option>
            <option value="kwhdperhousehold">kWh/d per household</option>
            <option value="kwhdperperson">kWh/d per person</option>
        </select> 

        <p><b>Comparison table for direct reference with original spreadsheet</b></p>
        
        <table class="table" style="width:100%">
        <tr>
            <th></th>
            <th>hours</th>
            <th>percent</th>
            <th>TWh/yr</th>
        </tr>
        <tr>
            <td>Total hours of simulation</td>
            <td>{{ i.hours }}</td>
            <td>100%</td>
            <td></td>
        </tr>
        <tr>
            <td>Initial el. balance positive</td>
            <td>{{ o.balance.initial_elec_balance_positive }}</td>
            <td>{{ (100*o.balance.initial_elec_balance_positive/i.hours) | toFixed(1) }}%</td>
            <td>{{ o.balance.total_initial_elec_balance_positive*0.0001 | toFixed(1) }}</td>
        </tr>
        <tr>
            <td>Final el. balance negative</td>
            <td>{{ o.balance.final_elec_balance_negative }}</td>
            <td>{{ (100*o.balance.final_elec_balance_negative/i.hours) | toFixed(1) }}%</td>
            <td>{{ o.balance.total_final_elec_balance_negative*0.0001 | toFixed(3) }}</td>
        </tr>
        <tr>
            <td>Final el. balance positive</td>
            <td>{{ o.balance.final_elec_balance_positive }}</td>
            <td>{{ (100*o.balance.final_elec_balance_positive/i.hours) | toFixed(1) }}%</td>
            <td>{{ o.balance.total_final_elec_balance_positive*0.0001 | toFixed(1) }}</td>
        </tr>
        <tr>
            <td>Unmet heat demand</td>
            <td>{{ o.unmet_heat_demand_count }}</td>
            <td></td>
            <td>{{ o.heat.total_unmet_demand*0.0001 | toFixed(1) }}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th></th>
            <th>Min</th>
            <th>Min %</th>
            <th>Max</th>
        </tr>
        <tr>
            <td>Hydrogen Store</td>
            <td>{{ o.hydrogen.min_SOC | toFixed(0) }} GWh</td>
            <td>{{ (100*o.hydrogen.min_SOC /i.hydrogen.storage_capacity_GWh) | toFixed(1) }}%</td>
            <td>{{ o.hydrogen.max_SOC | toFixed(0) }} GWh</td>
        </tr>
        <tr>
            <td>Liquid fuel Store</td>
            <td>{{ o.synth_fuel.store_min_SOC | toFixed(0) }} GWh</td>
            <td>{{ (100*o.synth_fuel.store_min_SOC/o.synth_fuel.store_max_SOC) | toFixed(1) }}%</td>
            <td>{{ o.synth_fuel.store_max_SOC | toFixed(0) }} GWh</td>
        </tr>
        <tr>
            <td>Methane Store</td>
            <td>{{ o.methane.min_SOC | toFixed(0) }} GWh</td>
            <td>{{ (100*o.methane.min_SOC/i.methane.storage_capacity_GWh) | toFixed(1) }}%</td>
            <td>{{ o.methane.max_SOC | toFixed(0) }} GWh</td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th></th>
            <th>Production</th>
            <th>Demand</th>
            <th></th>
        </tr>
        <tr>
            <td>Hydrogen</td>
            <td>{{ o.hydrogen.total_produced*0.0001 | toFixed(1) }}</td>
            <td>{{ o.hydrogen.total_demand*0.0001 | toFixed(1) }}</td>
            <td></td>
        </tr>
        <tr>
            <td>Liquid fuel</td>
            <td>{{ o.synth_fuel.total_produced*0.0001 | toFixed(1) }}</td>
            <td>{{ o.synth_fuel.total_demand*0.0001 | toFixed(1) }}</td>
            <td></td>
        </tr>
        <tr>
            <td>Methane</td>
            <td>{{ o.methane.total_produced*0.0001 | toFixed(1) }}</td>
            <td>{{ o.methane.total_demand*0.0001 | toFixed(1) }}</td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Hydrogen Electrolysis capacity factor</td>
            <td>{{ o.hydrogen.electrolysis_capacity_factor | toFixed(1) }}%</span></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Power-to-X capacity factor</td>
            <td>{{ o.power_to_X.capacity_factor | toFixed(1) }}%</span></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Biomass for biogas (includes biomass from wastes)</td>
            <td>{{ i.biogas.biomass_for_biogas | toFixed(1) }}</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Of which rotational grasses (e.g ryegrass)</td>
            <td>{{ o.biomass.grass_for_biogas | toFixed(1) }}</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Biomass for synth fuel (e.g SRC, miscanthus)</td>
            <td>{{ o.synth_fuel.total_biomass_used*0.0001 | toFixed(1) }}</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Biomass direct heat (SRF & SRC)</td>
            <td>{{ o.biomass.total_direct_use*0.0001 | toFixed(1) }}</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Electricity from dispatchable (TWh)</td>
            <td>{{ o.electric_backup.total_methane_turbine_output*0.0001 | toFixed(1) }}</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Max Dispatchable Output (GW)</td>
            <td>{{ o.electric_backup.max_methane_turbine_output | toFixed(1) }} GW</td>
            <td>{{ o.electric_backup.max_methane_turbine_output_date }}</td>
            <td></td>
        </tr>
        <tr>
            <td>Max Electricity Shortfall (GW)</td>
            <td>{{ o.electric_backup.max_shortfall | toFixed(1) }} GW</td>
            <td>{{ o.electric_backup.max_shortfall_date }}</td>
            <td></td>
        </tr>
        </table>
        <div style="font-size:14px">Note: The main ZCB scenario targets a 99.9% supply/demand matching level. Note that the max short fall with dispatchable capacity sized to meet this matching level can be quite high. There are several limitations with the model that could in reality reduce this maximum shortfall without increasing the capacity of dispatchable generation, including more sophisticated battery storage algorithms and higher levels of demand-side-response.</div>
    </div>
</div>

<div class="box">
    <div class="box-title">
        <img class="icon-expand" src="img/expand.png"><b>SCALED TO VILLAGE, TOWN, CITY or COUNTRY
        </b>
    </div>
    <div class="inner" name="scaled">
        
        <table><tr>
        <td>Number of households:</td>
        <td><input v-model.number="i.number_of_households" type="text" @change="update" style="width:100px"  autocomplete="off"/></td>
        </tr></table>
        <br>
        <table>
            <tr><th>Supply</th><th width="100px"></th><th>Storage, Gas & Liquids</th><th width="100px"></th></tr>
            <tr>
                <td>Onshore Wind</td><td v-html="auto_scale(i.supply.onshore_wind_capacity*o.scaleby,'kW')"></td>
                <td>Electrolysis capacity</td><td v-html="auto_scale(i.hydrogen.electrolysis_capacity_GW*o.scaleby,'kW')"></td>
                <td>Hydrogen storage</td><td v-html="auto_scale(i.hydrogen.storage_capacity_GWh*o.scaleby,'kWh')"></td>
            </tr>
            <tr>
                <td>Offshore Wind</td><td v-html="auto_scale(i.supply.offshore_wind_capacity*o.scaleby,'kW')"></td>
                <td>Methanation capacity</td><td v-html="auto_scale(i.methane.methanation_capacity*o.scaleby,'kW')"></td>
                <td>IHTEM capacity</td><td v-html="auto_scale(i.power_to_X.capacity*o.scaleby,'kW')"></td>
            </tr>
            <tr>
                <td>Solar PV</td><td v-html="auto_scale(i.supply.solarpv_capacity*o.scaleby,'kW')"></td>
                <td>Methane storage</td><td v-html="auto_scale(i.methane.storage_capacity_GWh*o.scaleby,'kWh')"></td>
            </tr>
            <tr>
                <td>Hydro</td><td v-html="auto_scale(i.supply.hydro_capacity*o.scaleby,'kW')"></td>
                <td>Synth fuel prod capacity</td><td v-html="auto_scale(i.synth_fuel.capacity_GW*o.scaleby,'kW')"></td>
            </tr>
            
            <tr>
                <td>Wave</td><td v-html="auto_scale(i.supply.wave_capacity*o.scaleby,'kW')"></td>
                <td>Elec storage cap</td><td v-html="auto_scale(i.electric_storage.capacity_GWh*o.scaleby,'kWh')"></td>
            </tr>
            <tr>
                <td>Tidal</td><td v-html="auto_scale(i.supply.tidal_capacity*o.scaleby,'kW')"></td>
                <td>BEV storage cap</td><td v-html="auto_scale(i.electric_car_battery_capacity*o.scaleby,'kWh')"></td>
            </tr>
            <tr>
                <td>Nuclear</td><td v-html="auto_scale(i.supply.nuclear_capacity*o.scaleby,'kW')"></td>

            </tr>
            <tr>
                <td>Methane turbine</td><td v-html="auto_scale(i.electric_backup.methane_turbine_capacity*o.scaleby,'kW')"></td>

            </tr>
        </table>
        
        <div style="clear:both"></div>
    </div>
</div>

<div class="box">
    <div class="box-title"><img class="icon-expand" src="img/expand.png"><b>MANUFACTURING ENERGY<span style="float:right">{{ o.EE.total | toFixed(1) }} TWh/yr</span></b></div>
    <div class="inner" name="manufacturing_energy">
        <div style="font-size:14px">Industrial energy use is dealt with above at a high level and a cautious approach is taken. It is part of the scenario that we would like to develop in more detail. The following makes a start on exploring the manufacturing energy required to build key elements of the renewable energy supply infrastructure: Offshore wind, Onshore wind and Solar PV. We can get an initial indication from this of the proportion of the total industrial energy demand modelled above that would relate to the manufacture of these technologies.<br><br>For more detail on the calculations below including sources see <a href="https://trystanlea.org.uk/zcb_industry">https://trystanlea.org.uk/zcb_industry</a></div><br>
        
        <table style="width:100%">
        <tr><th></th><th>Embodied Energy</th><th>Lifespan</th><th>Annual Demand</th></tr>
        <tr>
            <td>Offshore wind</td>
            <td><input v-model.number="i.EE.offshorewind_GWh_per_GW" type="text" @change="update" style="width:50px"  autocomplete="off"/> GWh/GW</td>
            <td><input v-model.number="i.EE.offshorewind_lifespan" type="text" @change="update" style="width:40px"  autocomplete="off"/> years</td>
            <td>{{ o.EE.offshorewind | toFixed(1) }} TWh/yr</span></td>
        </tr>
        <tr>
            <td>Onshore wind</td>
            <td><input v-model.number="i.EE.onshorewind_GWh_per_GW" type="text" @change="update" style="width:50px"  autocomplete="off"/> GWh/GW</td>
            <td><input v-model.number="i.EE.onshorewind_lifespan" type="text" @change="update" style="width:40px"  autocomplete="off"/> years</td>
            <td>{{ o.EE.onshorewind | toFixed(1) }} TWh/yr</span></td>
        </tr>
        <tr>
            <td>Solar PV</td>
            <td><input v-model.number="i.EE.solarpv_GWh_per_GW" type="text" @change="update" style="width:50px"  autocomplete="off"/> GWh/GW</td>
            <td><input v-model.number="i.EE.solarpv_lifespan" type="text" @change="update" style="width:40px"  autocomplete="off"/> years</td>
            <td>{{ o.EE.solarpv | toFixed(1) }} TWh/yr</span></td>
        </tr>
        <!--<tr><td>Lithium Ion Store</td><td>{{ o.EE_liion_store | toFixed(1) }} TWh/yr</span></td></tr>
        <tr><td>Electric Vehicle Battery</td><td>{{ o.EE_ecarbattery | toFixed(1) }} TWh/yr</span></td></tr>
        <tr><td>Electric Vehicle (rest)</td><td>{{ o.EE_ecar | toFixed(1) }} TWh/yr</span></td></tr>-->
        <tr><td>Total Annual Demand</td><td>{{ o.EE.total | toFixed(1) }} TWh/yr</span> ({{ o.EE.prc_of_industry_demand | toFixed(1) }}%</span> of industry demand)</td></tr>
        </table>
        <div style="float:left; width:45%">
      
        </div>
        <div style="clear:both"></div>
    </div>
</div>

</div>
